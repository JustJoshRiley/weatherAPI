<!DOCTYPE html>
<html>
  <head>
    <title>Ms Merriweather</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="container">
      <h1 id="temp">
        <!--Temp -->
      </h1>
      <p id="desc">
        <!-- description -->
      </p>
      <p id="cityResponse">
        <!--city-->
      </p>
      <!-- zip -->
      <div id="forms">
        <form id="zipform">
          <h1>Search by Zip</h1>
          <input 
            id="zip" 
            type="number" 
            placeholder="zip code"
            title="Please Enter a valid Zip Code"
            pattern="^\d{5}(?:[-\s]\d{4})?$"
          >
          <label for="unit">Select a Unit</label>
          <select name="unit" id="unit">
            <option value="imperial">Imperial</option>
            <option value="metric">Metric</option>
          </select>
          <button type="submit">Search</button>
        </form>
        <!-- city -->
        <form id="cityform">
          <h1>Search by City</h1>
          <input 
            id="city" 
            type="text" 
            placeholder="San Francisco"
            title="Please Enter a City"
          >
          <label for="unit">Select a Unit</label>
          <select name="unit" id="unit">
            <option value="imperial">Imperial</option>
            <option value="metric">Metric</option>
          </select>
          <button type="submit">Search</button>
        </form>

        <!-- Geo -->
        <form id="geoform">
          <h1>Search by City</h1>
          <input 
            id="lat" 
            type="text" 
            placeholder="Latitude N"
            title="Please Enter Latitude"
          >
          <input 
            id="lon" 
            type="text" 
            placeholder="Longitude W"
            title="Please Enter Longitude"
          >
          <label for="unit">Select a Unit</label>
          <select name="unit" id="unit">
            <option value="imperial">Imperial</option>
            <option value="metric">Metric</option>
          </select>
          <button type="submit">Search</button>
        </form>

      </div>
    </div>
    <script type="module">
      // ------------------------------------------------------
      // Developer Code
      // Get Element refererences
      import { getWeatherbyZip, getWeatherbyCity, getWeatherbyGeo} from './index.js'
      // zip
      const zipformEl = document.getElementById('zipform')
      const zipInput = document.getElementById('zip')

      // city
      const cityformEl = document.getElementById('cityform')
      const cityInput = document.getElementById('city')

      // geo
      const geoformEl = document.getElementById('geoform')
      const geoLatInput = document.getElementById('lat')
      const geoLonInput = document.getElementById('lon')


      const apiKey = '1a226c5722a5a37173253cabe929e4d3'
      const tempEl = document.getElementById('temp')
      const descEl = document.getElementById('desc')
      const cityEl = document.getElementById('cityResponse')
      


      // Define event listeners
      // zip
      zipformEl.addEventListener('submit', (e) => {
        e.preventDefault()
        const zip = zipInput.value
        const select = document.getElementById('unit');
        const unit = select.options[select.selectedIndex].value;
        getWeatherbyZip(apiKey, zip, unit, (data) => {
          tempEl.innerHTML = data.mainTemp
          descEl.innerHTML = data.weather
          cityEl.innerHTML = data.cityName
        })
      })

      // city
      cityformEl.addEventListener('submit', (e) => {
        e.preventDefault()
        const city = cityInput.value
        console.log(city)
        const select = document.getElementById('unit');
        const unit = select.options[select.selectedIndex].value;
        getWeatherbyCity(apiKey, city, unit, (data) => {
          tempEl.innerHTML = data.mainTemp
          descEl.innerHTML = data.weather
          cityEl.innerHTML = data.cityName
        })
      })

      // geo
      geoformEl.addEventListener('submit', (e) => {
        e.preventDefault()
        const lat = geoLatInput.value
        const lon = geoLonInput.value
        const select = document.getElementById('unit');
        const unit = select.options[select.selectedIndex].value;
        getWeatherbyGeo(apiKey, lat, lon, unit, (data) => {
          tempEl.innerHTML = data.mainTemp
          descEl.innerHTML = data.weather
          cityEl.innerHTML = data.cityName
        })
      })


      // Functions 
    
    </script>
  </body>
</html>
